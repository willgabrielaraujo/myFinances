{"ast":null,"code":"var _jsxFileName = \"/Users/gabrielaraujo/Dev/workspace/web/minhas-financas-app/src/views/entries/entries.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Card from \"../../components/card\";\nimport FormGroup from '../../components/form-group';\nimport SelectMenu from '../../components/selectMenu';\nimport EntryList from './entryList';\nimport EntryService from '../../app/services/entryService';\nimport LocalStorageService from '../../app/services/localStorageService';\nimport { errorAlert, successAlert, warningAlert } from \"../../components/toastr\";\nimport { Dialog } from 'primereact/dialog';\nimport { Button } from 'primereact/button';\n\nclass Entries extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      year: '',\n      month: '',\n      description: '',\n      type: '',\n      status: '',\n      showDeletionConfirmDialog: false,\n      entryToBeDeleted: {},\n      entries: []\n    };\n\n    this.validate = () => {\n      if (!this.state.year) {\n        errorAlert('Year is required');\n        return false;\n      }\n\n      return true;\n    };\n\n    this.search = () => {\n      if (!this.validate()) {\n        return false;\n      }\n\n      const currentUser = LocalStorageService.getItem('_usuario_logado');\n      this.service.filter({\n        usuario: currentUser.id,\n        year: this.state.year,\n        month: this.state.month,\n        description: this.state.description,\n        type: this.state.type,\n        status: this.state.status\n      }).then(response => {\n        const entries = response.data;\n\n        if (entries.length > 0) {\n          successAlert('Data fetched');\n          this.setState({\n            entries\n          });\n        } else {\n          warningAlert('Oops! No data found');\n          this.setState({\n            entries: []\n          });\n        }\n      }).catch(error => {\n        errorAlert(error.response.data);\n      });\n    };\n\n    this.editEntry = id => {\n      this.props.history.push(`/add-entry/${id}`);\n    };\n\n    this.deleteEntry = () => {\n      this.service.deleteEntry(this.state.entryToBeDeleted.id).then(response => {\n        this.removeFromEntryList(this.state.entryToBeDeleted);\n        this.hideDeletionDialog();\n        successAlert(\"Entry deleted!\");\n      }).catch(error => {\n        errorAlert('Failed to delete entry!');\n      });\n    };\n\n    this.showDeletionDialog = entry => {\n      this.setState({\n        showDeletionConfirmDialog: true,\n        entryToBeDeleted: entry\n      });\n    };\n\n    this.hideDeletionDialog = () => {\n      this.setState({\n        showDeletionConfirmDialog: false,\n        entryToBeDeleted: {}\n      });\n    };\n\n    this.addEntry = () => {\n      this.props.history.push('/add-entry');\n    };\n\n    this.changeStatus = (entry, status) => {\n      this.service.updateStatus(entry.id, status).then(response => {\n        const entries = this.state.entries;\n        const index = entries.indexOf(entry);\n\n        if (index !== -1) {\n          entry['status'] = status;\n          entries[index] = entry;\n          this.setState({\n            entry\n          });\n        }\n\n        successAlert('Entry status updated');\n      }).catch(error => {\n        errorAlert(error.response.data);\n      });\n    };\n\n    this.service = new EntryService();\n  }\n\n  removeFromEntryList(entry) {\n    const entries = this.state.entries;\n    const entryIndex = entries.indexOf(entry);\n    entries.splice(entryIndex, 1);\n    this.setState(entries);\n  }\n\n  render() {\n    const months = this.service.getMonthList();\n    const types = this.service.getTypeList();\n    const deletionDialogFooter = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      label: \"Yes\",\n      icon: \"pi pi-check\",\n      onClick: this.deleteEntry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      label: \"No\",\n      icon: \"pi pi-times\",\n      onClick: this.hideDeletionDialog,\n      className: \"p-button-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }\n    }));\n    return /*#__PURE__*/React.createElement(Card, {\n      title: \"Search Entries\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Ano: *\",\n      htmlFor: \"inputYear\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.year,\n      onChange: e => this.setState({\n        year: e.target.value\n      }),\n      id: \"inputYear\",\n      placeholder: \"Year\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Month: \",\n      htmlFor: \"inputMonth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(SelectMenu, {\n      id: \"inputMonth\",\n      value: this.state.month,\n      onChange: e => this.setState({\n        month: e.target.value\n      }),\n      className: \"form-control\",\n      options: months,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Description: *\",\n      htmlFor: \"inputDescription\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.description,\n      onChange: e => this.setState({\n        description: e.target.value\n      }),\n      id: \"inputDescription\",\n      placeholder: \"Description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Type: \",\n      htmlFor: \"inputType\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(SelectMenu, {\n      id: \"inputType\",\n      value: this.state.type,\n      onChange: e => this.setState({\n        type: e.target.value\n      }),\n      className: \"form-control\",\n      options: types,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"pi pi-search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 19\n      }\n    }), \" Search\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.addEntry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"pi pi-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }), \" Add\"))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(EntryList, {\n      entries: this.state.entries,\n      editAction: this.editEntry,\n      deleteAction: this.showDeletionDialog,\n      updateStatus: this.changeStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Dialog, {\n      header: \"Delete entry\",\n      visible: this.state.showDeletionConfirmDialog,\n      style: {\n        width: '50vw'\n      },\n      modal: true,\n      footer: deletionDialogFooter,\n      onHide: () => this.setState({\n        showDeletionConfirmDialog: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, \"Do you confirm the deletion of this entry?\")));\n  }\n\n}\n\nexport default withRouter(Entries);","map":{"version":3,"sources":["/Users/gabrielaraujo/Dev/workspace/web/minhas-financas-app/src/views/entries/entries.js"],"names":["React","withRouter","Card","FormGroup","SelectMenu","EntryList","EntryService","LocalStorageService","errorAlert","successAlert","warningAlert","Dialog","Button","Entries","Component","constructor","state","year","month","description","type","status","showDeletionConfirmDialog","entryToBeDeleted","entries","validate","search","currentUser","getItem","service","filter","usuario","id","then","response","data","length","setState","catch","error","editEntry","props","history","push","deleteEntry","removeFromEntryList","hideDeletionDialog","showDeletionDialog","entry","addEntry","changeStatus","updateStatus","index","indexOf","entryIndex","splice","render","months","getMonthList","types","getTypeList","deletionDialogFooter","e","target","value","width"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport Card from \"../../components/card\"\nimport FormGroup from '../../components/form-group'\nimport SelectMenu from '../../components/selectMenu'\nimport EntryList from './entryList'\nimport EntryService from '../../app/services/entryService'\nimport LocalStorageService from '../../app/services/localStorageService'\nimport { errorAlert, successAlert, warningAlert } from \"../../components/toastr\";\nimport { Dialog } from 'primereact/dialog';\nimport { Button } from 'primereact/button';\n\nclass Entries extends React.Component {\n\n  state = {\n    year: '',\n    month: '',\n    description: '',\n    type: '',\n    status: '',\n    showDeletionConfirmDialog: false,\n    entryToBeDeleted: {},\n    entries: []\n  }\n\n  constructor() {\n    super()\n    this.service = new EntryService()\n  }\n\n  validate = () => {\n    if (!this.state.year) {\n      errorAlert('Year is required')\n      return false\n    }\n\n    return true\n  }\n\n  search = () => {\n    if (!this.validate()) {\n      return false\n    }\n\n    const currentUser = LocalStorageService.getItem('_usuario_logado')\n\n    this.service.filter({\n      usuario: currentUser.id,\n      year: this.state.year,\n      month: this.state.month,\n      description: this.state.description,\n      type: this.state.type,\n      status: this.state.status\n    }).then(response => {\n      const entries = response.data\n\n      if (entries.length > 0) {\n        successAlert('Data fetched')\n        this.setState({ entries })\n      } else {\n        warningAlert('Oops! No data found')\n        this.setState({ entries: [] })\n      }\n\n    }).catch(error => {\n      errorAlert(error.response.data)\n    })\n  }\n\n  editEntry = (id) => {\n    this.props.history.push(`/add-entry/${id}`)\n  }\n\n  deleteEntry = () => {\n    this.service.deleteEntry(\n      this.state.entryToBeDeleted.id\n    ).then(response => {\n      this.removeFromEntryList(this.state.entryToBeDeleted)\n      this.hideDeletionDialog()\n      successAlert(\"Entry deleted!\")\n    }).catch(error => {\n      errorAlert('Failed to delete entry!')\n    })\n  }\n\n  removeFromEntryList(entry) {\n    const entries = this.state.entries\n    const entryIndex = entries.indexOf(entry)\n    entries.splice(entryIndex, 1)\n    this.setState(entries)\n  }\n\n  showDeletionDialog = (entry) => {\n    this.setState({ showDeletionConfirmDialog: true, entryToBeDeleted: entry })\n  }\n\n  hideDeletionDialog = () => {\n    this.setState({ showDeletionConfirmDialog: false, entryToBeDeleted: {} })\n  }\n\n  addEntry = () => {\n    this.props.history.push('/add-entry')\n  }\n\n  changeStatus = (entry, status) => {\n    this.service.updateStatus(\n      entry.id, status\n    ).then(response => {\n      const entries = this.state.entries\n      const index = entries.indexOf(entry)\n\n      if (index !== -1) {\n        entry['status'] = status\n        entries[index] = entry\n        this.setState({ entry })\n      }\n\n      successAlert('Entry status updated')\n    }).catch(error => {\n      errorAlert(error.response.data)\n    })\n  }\n\n  render() {\n    const months = this.service.getMonthList()\n    const types = this.service.getTypeList()\n\n    const deletionDialogFooter = (\n      <div>\n        <Button\n          label=\"Yes\"\n          icon=\"pi pi-check\"\n          onClick={this.deleteEntry}\n        />\n        <Button\n          label=\"No\"\n          icon=\"pi pi-times\"\n          onClick={this.hideDeletionDialog}\n          className=\"p-button-secondary\"\n        />\n      </div>\n    );\n    return (\n      <Card title=\"Search Entries\">\n        <div className=\"row\">\n          <div className=\"col-lg-6\">\n            <div className=\"bs-component\">\n              <fieldset>\n                <FormGroup label=\"Ano: *\" htmlFor=\"inputYear\">\n                  <input type=\"text\"\n                    className=\"form-control\"\n                    value={this.state.year}\n                    onChange={e => this.setState({ year: e.target.value })}\n                    id=\"inputYear\"\n                    placeholder=\"Year\"\n                  />\n                </FormGroup>\n                <FormGroup label=\"Month: \" htmlFor=\"inputMonth\">\n                  <SelectMenu\n                    id=\"inputMonth\"\n                    value={this.state.month}\n                    onChange={e => this.setState({ month: e.target.value })}\n                    className=\"form-control\"\n                    options={months}\n                  />\n                </FormGroup>\n                <FormGroup label=\"Description: *\" htmlFor=\"inputDescription\">\n                  <input type=\"text\"\n                    className=\"form-control\"\n                    value={this.state.description}\n                    onChange={e => this.setState({ description: e.target.value })}\n                    id=\"inputDescription\"\n                    placeholder=\"Description\"\n                  />\n                </FormGroup>\n                <FormGroup label=\"Type: \" htmlFor=\"inputType\">\n                  <SelectMenu\n                    id=\"inputType\"\n                    value={this.state.type}\n                    onChange={e => this.setState({ type: e.target.value })}\n                    className=\"form-control\"\n                    options={types}\n                  />\n                </FormGroup>\n                <button\n                  type=\"button\"\n                  className=\"btn btn-primary\"\n                  onClick={this.search}>\n                  <i className=\"pi pi-search\"></i> Search\n                  </button>\n                <button\n                  type=\"button\"\n                  className=\"btn btn-success\"\n                  onClick={this.addEntry}>\n                  <i className=\"pi pi-plus\"></i> Add\n                  </button>\n              </fieldset>\n            </div>\n          </div>\n        </div>\n        <br />\n        <div className=\"row\">\n          <div className=\"col-lg-12\">\n            <EntryList\n              entries={this.state.entries}\n              editAction={this.editEntry}\n              deleteAction={this.showDeletionDialog}\n              updateStatus={this.changeStatus}\n            />\n          </div>\n        </div>\n        <div>\n          <Dialog\n            header=\"Delete entry\"\n            visible={this.state.showDeletionConfirmDialog}\n            style={{ width: '50vw' }}\n            modal={true}\n            footer={deletionDialogFooter}\n            onHide={() => this.setState({ showDeletionConfirmDialog: false })}>\n            Do you confirm the deletion of this entry?\n          </Dialog>\n        </div>\n      </Card >\n    )\n  }\n}\n\nexport default withRouter(Entries)"]},"metadata":{},"sourceType":"module"}