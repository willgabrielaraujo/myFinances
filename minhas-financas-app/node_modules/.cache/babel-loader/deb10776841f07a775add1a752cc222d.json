{"ast":null,"code":"var _jsxFileName = \"/Users/gabrielaraujo/Dev/workspace/web/minhas-financas-app/src/views/entries/Entries.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Card from \"../../components/Card\";\nimport FormGroup from \"../../components/FormGroup\";\nimport SelectMenu from \"../../components/SelectMenu\";\nimport EntryList from \"./EntryList\";\nimport EntryService from \"../../app/services/EntryService\";\nimport LocalStorageService from \"../../app/services/LocalStorageService\";\nimport { errorAlert, successAlert, warningAlert } from \"../../components/Toastr\";\nimport { Dialog } from \"primereact/dialog\";\nimport { Button } from \"primereact/button\";\n\nclass Entries extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      year: \"\",\n      month: \"\",\n      description: \"\",\n      type: \"\",\n      status: \"\",\n      showDeletionConfirmDialog: false,\n      entryToBeDeleted: {},\n      entries: []\n    };\n\n    this.validate = () => {\n      if (!this.state.year) {\n        errorAlert(\"Year is required\");\n        return false;\n      }\n\n      return true;\n    };\n\n    this.search = () => {\n      if (!this.validate()) {\n        return false;\n      }\n\n      const currentUser = LocalStorageService.getItem(\"_current_user\");\n      this.service.filter({\n        user: currentUser.id,\n        year: this.state.year,\n        month: this.state.month,\n        description: this.state.description,\n        type: this.state.type,\n        status: this.state.status\n      }).then(response => {\n        const entries = response.data;\n\n        if (entries.length > 0) {\n          successAlert(\"Data fetched!\");\n          this.setState({\n            entries\n          });\n        } else {\n          warningAlert(\"Oops! No data found.\");\n          this.setState({\n            entries: []\n          });\n        }\n      }).catch(error => {\n        errorAlert(error.response.data);\n      });\n    };\n\n    this.editEntry = id => {\n      this.props.history.push(`/add-entry/${id}`);\n    };\n\n    this.deleteEntry = () => {\n      this.service.deleteEntry(this.state.entryToBeDeleted.id).then(response => {\n        this.removeFromEntryList(this.state.entryToBeDeleted);\n        this.hideDeletionDialog();\n        successAlert(\"Entry deleted!\");\n      }).catch(error => {\n        errorAlert(\"Failed to delete entry!\");\n      });\n    };\n\n    this.showDeletionDialog = entry => {\n      this.setState({\n        showDeletionConfirmDialog: true,\n        entryToBeDeleted: entry\n      });\n    };\n\n    this.hideDeletionDialog = () => {\n      this.setState({\n        showDeletionConfirmDialog: false,\n        entryToBeDeleted: {}\n      });\n    };\n\n    this.addEntry = () => {\n      this.props.history.push(\"/add-entry\");\n    };\n\n    this.changeStatus = (entry, status) => {\n      this.service.updateStatus(entry.id, status).then(response => {\n        const entries = this.state.entries;\n        const index = entries.indexOf(entry);\n\n        if (index !== -1) {\n          entry[\"status\"] = status;\n          entries[index] = entry;\n          this.setState({\n            entry\n          });\n        }\n\n        successAlert(\"Entry status updated\");\n      }).catch(error => {\n        errorAlert(error.response.data);\n      });\n    };\n\n    this.service = new EntryService();\n  }\n\n  removeFromEntryList(entry) {\n    const entries = this.state.entries;\n    const entryIndex = entries.indexOf(entry);\n    entries.splice(entryIndex, 1);\n    this.setState(entries);\n  }\n\n  render() {\n    const months = this.service.getMonthList();\n    const types = this.service.getTypeList();\n    const deletionDialogFooter = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      label: \"Yes\",\n      icon: \"pi pi-check\",\n      onClick: this.deleteEntry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      label: \"No\",\n      icon: \"pi pi-times\",\n      onClick: this.hideDeletionDialog,\n      className: \"p-button-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 5\n      }\n    }));\n    return /*#__PURE__*/React.createElement(Card, {\n      title: \"Search Entries\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Ano: *\",\n      htmlFor: \"inputYear\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.year,\n      onChange: e => this.setState({\n        year: e.target.value\n      }),\n      id: \"inputYear\",\n      placeholder: \"Year\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Month: \",\n      htmlFor: \"inputMonth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SelectMenu, {\n      id: \"inputMonth\",\n      value: this.state.month,\n      onChange: e => this.setState({\n        month: e.target.value\n      }),\n      className: \"form-control\",\n      options: months,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Description: *\",\n      htmlFor: \"inputDescription\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.description,\n      onChange: e => this.setState({\n        description: e.target.value\n      }),\n      id: \"inputDescription\",\n      placeholder: \"Description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Type: \",\n      htmlFor: \"inputType\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SelectMenu, {\n      id: \"inputType\",\n      value: this.state.type,\n      onChange: e => this.setState({\n        type: e.target.value\n      }),\n      className: \"form-control\",\n      options: types,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"pi pi-search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 10\n      }\n    }), \" Search\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.addEntry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"pi pi-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 10\n      }\n    }), \" Add\"))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(EntryList, {\n      entries: this.state.entries,\n      editAction: this.editEntry,\n      deleteAction: this.showDeletionDialog,\n      updateStatus: this.changeStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Dialog, {\n      header: \"Delete entry\",\n      visible: this.state.showDeletionConfirmDialog,\n      style: {\n        width: \"50vw\"\n      },\n      modal: true,\n      footer: deletionDialogFooter,\n      onHide: () => this.setState({\n        showDeletionConfirmDialog: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 6\n      }\n    }, \"Do you confirm the deletion of this entry?\")));\n  }\n\n}\n\nexport default withRouter(Entries);","map":{"version":3,"sources":["/Users/gabrielaraujo/Dev/workspace/web/minhas-financas-app/src/views/entries/Entries.js"],"names":["React","withRouter","Card","FormGroup","SelectMenu","EntryList","EntryService","LocalStorageService","errorAlert","successAlert","warningAlert","Dialog","Button","Entries","Component","constructor","state","year","month","description","type","status","showDeletionConfirmDialog","entryToBeDeleted","entries","validate","search","currentUser","getItem","service","filter","user","id","then","response","data","length","setState","catch","error","editEntry","props","history","push","deleteEntry","removeFromEntryList","hideDeletionDialog","showDeletionDialog","entry","addEntry","changeStatus","updateStatus","index","indexOf","entryIndex","splice","render","months","getMonthList","types","getTypeList","deletionDialogFooter","e","target","value","width"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Card from \"../../components/Card\";\nimport FormGroup from \"../../components/FormGroup\";\nimport SelectMenu from \"../../components/SelectMenu\";\nimport EntryList from \"./EntryList\";\nimport EntryService from \"../../app/services/EntryService\";\nimport LocalStorageService from \"../../app/services/LocalStorageService\";\nimport {\n\terrorAlert,\n\tsuccessAlert,\n\twarningAlert,\n} from \"../../components/Toastr\";\nimport { Dialog } from \"primereact/dialog\";\nimport { Button } from \"primereact/button\";\n\nclass Entries extends React.Component {\n\tstate = {\n\t\tyear: \"\",\n\t\tmonth: \"\",\n\t\tdescription: \"\",\n\t\ttype: \"\",\n\t\tstatus: \"\",\n\t\tshowDeletionConfirmDialog: false,\n\t\tentryToBeDeleted: {},\n\t\tentries: [],\n\t};\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.service = new EntryService();\n\t}\n\n\tvalidate = () => {\n\t\tif (!this.state.year) {\n\t\t\terrorAlert(\"Year is required\");\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tsearch = () => {\n\t\tif (!this.validate()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst currentUser = LocalStorageService.getItem(\"_current_user\");\n\n\t\tthis.service\n\t\t\t.filter({\n\t\t\t\tuser: currentUser.id,\n\t\t\t\tyear: this.state.year,\n\t\t\t\tmonth: this.state.month,\n\t\t\t\tdescription: this.state.description,\n\t\t\t\ttype: this.state.type,\n\t\t\t\tstatus: this.state.status,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tconst entries = response.data;\n\n\t\t\t\tif (entries.length > 0) {\n\t\t\t\t\tsuccessAlert(\"Data fetched!\");\n\t\t\t\t\tthis.setState({ entries });\n\t\t\t\t} else {\n\t\t\t\t\twarningAlert(\"Oops! No data found.\");\n\t\t\t\t\tthis.setState({ entries: [] });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\terrorAlert(error.response.data);\n\t\t\t});\n\t};\n\n\teditEntry = (id) => {\n\t\tthis.props.history.push(`/add-entry/${id}`);\n\t};\n\n\tdeleteEntry = () => {\n\t\tthis.service\n\t\t\t.deleteEntry(this.state.entryToBeDeleted.id)\n\t\t\t.then((response) => {\n\t\t\t\tthis.removeFromEntryList(this.state.entryToBeDeleted);\n\t\t\t\tthis.hideDeletionDialog();\n\t\t\t\tsuccessAlert(\"Entry deleted!\");\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\terrorAlert(\"Failed to delete entry!\");\n\t\t\t});\n\t};\n\n\tremoveFromEntryList(entry) {\n\t\tconst entries = this.state.entries;\n\t\tconst entryIndex = entries.indexOf(entry);\n\t\tentries.splice(entryIndex, 1);\n\t\tthis.setState(entries);\n\t}\n\n\tshowDeletionDialog = (entry) => {\n\t\tthis.setState({ showDeletionConfirmDialog: true, entryToBeDeleted: entry });\n\t};\n\n\thideDeletionDialog = () => {\n\t\tthis.setState({ showDeletionConfirmDialog: false, entryToBeDeleted: {} });\n\t};\n\n\taddEntry = () => {\n\t\tthis.props.history.push(\"/add-entry\");\n\t};\n\n\tchangeStatus = (entry, status) => {\n\t\tthis.service\n\t\t\t.updateStatus(entry.id, status)\n\t\t\t.then((response) => {\n\t\t\t\tconst entries = this.state.entries;\n\t\t\t\tconst index = entries.indexOf(entry);\n\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tentry[\"status\"] = status;\n\t\t\t\t\tentries[index] = entry;\n\t\t\t\t\tthis.setState({ entry });\n\t\t\t\t}\n\n\t\t\t\tsuccessAlert(\"Entry status updated\");\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\terrorAlert(error.response.data);\n\t\t\t});\n\t};\n\n\trender() {\n\t\tconst months = this.service.getMonthList();\n\t\tconst types = this.service.getTypeList();\n\n\t\tconst deletionDialogFooter = (\n\t\t\t<div>\n\t\t\t\t<Button label=\"Yes\" icon=\"pi pi-check\" onClick={this.deleteEntry} />\n\t\t\t\t<Button\n\t\t\t\t\tlabel=\"No\"\n\t\t\t\t\ticon=\"pi pi-times\"\n\t\t\t\t\tonClick={this.hideDeletionDialog}\n\t\t\t\t\tclassName=\"p-button-secondary\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t\treturn (\n\t\t\t<Card title=\"Search Entries\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col-lg-6\">\n\t\t\t\t\t\t<div className=\"bs-component\">\n\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t<FormGroup label=\"Ano: *\" htmlFor=\"inputYear\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.year}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.setState({ year: e.target.value })}\n\t\t\t\t\t\t\t\t\t\tid=\"inputYear\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Year\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t\t\t<FormGroup label=\"Month: \" htmlFor=\"inputMonth\">\n\t\t\t\t\t\t\t\t\t<SelectMenu\n\t\t\t\t\t\t\t\t\t\tid=\"inputMonth\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.month}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.setState({ month: e.target.value })}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\toptions={months}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t\t\t<FormGroup label=\"Description: *\" htmlFor=\"inputDescription\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.description}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ description: e.target.value })\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tid=\"inputDescription\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Description\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t\t\t<FormGroup label=\"Type: \" htmlFor=\"inputType\">\n\t\t\t\t\t\t\t\t\t<SelectMenu\n\t\t\t\t\t\t\t\t\t\tid=\"inputType\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.type}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.setState({ type: e.target.value })}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\toptions={types}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\n\t\t\t\t\t\t\t\t\tonClick={this.search}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i className=\"pi pi-search\"></i> Search\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-success\"\n\t\t\t\t\t\t\t\t\tonClick={this.addEntry}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i className=\"pi pi-plus\"></i> Add\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<br />\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col-lg-12\">\n\t\t\t\t\t\t<EntryList\n\t\t\t\t\t\t\tentries={this.state.entries}\n\t\t\t\t\t\t\teditAction={this.editEntry}\n\t\t\t\t\t\t\tdeleteAction={this.showDeletionDialog}\n\t\t\t\t\t\t\tupdateStatus={this.changeStatus}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\theader=\"Delete entry\"\n\t\t\t\t\t\tvisible={this.state.showDeletionConfirmDialog}\n\t\t\t\t\t\tstyle={{ width: \"50vw\" }}\n\t\t\t\t\t\tmodal={true}\n\t\t\t\t\t\tfooter={deletionDialogFooter}\n\t\t\t\t\t\tonHide={() => this.setState({ showDeletionConfirmDialog: false })}\n\t\t\t\t\t>\n\t\t\t\t\t\tDo you confirm the deletion of this entry?\n\t\t\t\t\t</Dialog>\n\t\t\t\t</div>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\nexport default withRouter(Entries);\n"]},"metadata":{},"sourceType":"module"}